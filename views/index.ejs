<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Document</title>
</head>
<body>
    <div id="main" style="display: none;"></div>
    <div style="display: flex; flex-direction: column;align-items: center;">
    <canvas id="myChart" style="width:100%;max-width:80%"></canvas>
   
    <div id="chartContainer1" style="height: 370px; width: 80%;"></div>
    <div id="chartContainer2" style="height: 370px; width: 80%;"></div>
    <div id="chartContainer3" style="height: 370px; width: 80%;"></div>
    <div id="chartContainer4" style="height: 370px; width: 80%;"></div>
    </div>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script>
        window.onload = function () {
            var data =JSON. parse(document.getElementById('main').innerHTML);
            var dataPoints = [];
            var dataPoints2 = [];
            var dataPoints3 = [];
            var dataPoints4 = [];

            console.log(data);
            var chart = new CanvasJS.Chart("chartContainer1", {
                animationEnabled: true,
                theme: "light2",
                title: {
                    text: "Road 1"
                },
                axisY: {
                    includeZero: false
                },
                data: [{
                    type: "line",
                    dataPoints: dataPoints
                }]
            });
            var chart2 = new CanvasJS.Chart("chartContainer2", {
                animationEnabled: true,
                theme: "light2",
                title: {
                    text: "Road 2"
                },
                axisY: {
                    includeZero: false
                },
                data: [{
                    type: "line",
                    dataPoints: dataPoints2
                }]
            });
            var chart3 = new CanvasJS.Chart("chartContainer3", {
                animationEnabled: true,
                theme: "light2",
                title: {
                    text: "Road 3"
                },
                axisY: {
                    includeZero: false
                },
                data: [{
                    type: "line",
                    dataPoints: dataPoints3
                }]
            });

            var chart4 = new CanvasJS.Chart("chartContainer4", {
                animationEnabled: true,
                theme: "light2",
                title: {
                    text: "Road 4"
                },
                axisY: {
                    includeZero: false
                },
                data: [{
                    type: "line",
                    dataPoints: dataPoints4
                }]
            });

            function addData1(data) {
                for (var i = 0; i < data.length; i++) {
                    dataPoints.push({
                        x: data[i].TIME,
                        y: data[i].road1
                    });
                }
                chart.render();

            }
            addData1(data);
            function addData2(data) {
                for (var i = 0; i < data.length; i++) {
                    dataPoints2.push({
                        x: data[i].TIME,
                        y: data[i].road2
                    });
                }
                chart2.render();

            }
            addData2(data);
            function addData3(data) {
                for (var i = 0; i < data.length; i++) {
                    dataPoints3.push({
                        x: data[i].TIME,
                        y: data[i].road3
                    });
                }
                chart3.render();

            }
            addData3(data);
            
            function addData4(data) {
                for (var i = 0; i < data.length; i++) {
                    dataPoints4.push({
                        x: data[i].TIME,
                        y: data[i].road4
                    });
                }
                chart4.render();

            }
            addData4(data);
            console.log(dataPoints);
            new Chart("myChart", {
            type: "line",
            data: {
                datasets: [{ 
                label: "Road 1",
                data: dataPoints,
                borderColor: "red",
                fill: false
                }, { 
                label: "Road 2",
                data: dataPoints2,
                borderColor: "green",
                fill: false
                }, { 
                label: "Road 3",
                data: dataPoints3,
                borderColor: "blue",
                fill: false
                }, { 
                label: "Road 4",
                data: dataPoints4,
                borderColor: "yellow",
                fill: false
                }]
            },
            options: {
                title: {
                  display: true,
                  text: 'Density plot of all roads',
                  color: 'navy',
                  position: 'top',
                  align: 'center',
                    fontSize: 40,
                },
                legend: {display: true}
            }
        });
        
        }
    </script>


    // <script type="module" src="js/index.js"></script>
</body>
</html>